<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Leaflet Vector Tiles</title>

  <!-- CSS for Leaflet map  -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>

  <!-- JS for Leaflet map  -->
  <!-- Make sure you put this AFTER Leaflet's CSS -->
  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>

  <!-- Leaflet plugin for vector tiles support -->
  <script type="text/javascript"  src="https://unpkg.com/leaflet.vectorgrid@1.2.0"></script>

  <style>
    body {
        padding: 0;
        margin: 0;
    }
    html, body, #mapid {
        height: 100%;
        width: 100%;
    }
    #mapid { z-index: 1 }
    #query {
        background: #ffffffaa;
        padding: 0.5em 1.5em;
        position: absolute;
        left: 4em;
        top: 1em;
        z-index: 2;
    }
    #tags {
      font-size: 105%;
      padding-left: 0.2em;
      width: 20em;
    }
    #query h2 {
      margin-top: 0.4em; margin-bottom: 0.4em;
    }
  </style>
</head>

<body>

<div id="query">
  <h2>Vector Tiles in Leaflet</h2>
  <p></p>
</div>

<div id="mapid"></div>

<script>

  var map = L.map('mapid').setView([0, 0], 2);

  // Add a base map layer to the map
  var baseUrl = 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png';
  var baseLayer = L.tileLayer(baseUrl, {
    maxZoom: 18
  });
  baseLayer.addTo(map);

  // Add the tile layer to the map
  // https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip
  var vectorServer = "http://localhost:7800/";
  var vectorLayerId = "public.ne_50m_admin_0_countries";
  var vectorUrl = vectorServer + vectorLayerId + "/{z}/{x}/{y}.pbf";
  console.log("Reading tiles from " + vectorUrl);
  var vectorTileStyling = {
    vectorLayerId: {
      fill: true,
      weight: 1,
      fillColor: 'pink',
      color: 'pink',
      fillOpacity: 0.2,
      opacity: 0.4,
    }
  };
  var vectorTileOptions = {
    rendererFactory: L.canvas.tile,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    vectorTileLayerStyles: vectorTileStyling
  };
  var vectorLayer = L.vectorGrid.protobuf(vectorUrl, vectorTileOptions);
  vectorLayer.addTo(map);


</script>

</body>
</html>
